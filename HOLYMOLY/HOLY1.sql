CREATE TABLE MOVIE (
MOVIENO VARCHAR2(99) CONSTRAINT MOVIENO_PK PRIMARY KEY,
MOVIENAME VARCHAR2(99) NOT NULL,
MOVIERUN VARCHAR2(99) NOT NULL,
MOVIEPRICE NUMBER(5) NOT NULL
);

CREATE TABLE HMEMBER (
HID	VARCHAR2(100)	CONSTRAINT HID_PK PRIMARY KEY,
HNAME	VARCHAR2(100) NOT NULL,	
HPHONE	VARCHAR2(100) NOT NULL,	
HPASSWORD	VARCHAR2(100) NOT NULL
);

CREATE TABLE THEATER(
THEATER_NUM VARCHAR2(99)           CONSTRAINT THEATER_PK PRIMARY KEY,  --PK
THEATER_SEAT VARCHAR2(99)           NOT NULL,
MOVIENO VARCHAR2(99)                 CONSTRAINT THEATER_MOVIENO_FK REFERENCES MOVIE ( MOVIENO )-- FK
);

CREATE TABLE PAYMENT (
PAYNUM NUMBER(15) CONSTRAINT PAYMENT_PK PRIMARY KEY);

CREATE TABLE TICKETORDER (
TORDERNO VARCHAR2(99) CONSTRAINT ORDER_PK PRIMARY KEY,
HID VARCHAR2(99) CONSTRAINT ORDER_HID_FK REFERENCES HMEMBER(HID),
PAYNUM NUMBER(15) CONSTRAINT PAYMENT_FK REFERENCES PAYMENT(PAYNUM),
TORDERSEAT VARCHAR2(99)
);

CREATE TABLE SCHEDULE (
SCHNO VARCHAR2(99) CONSTRAINT SCHEDULE_SCHNO_PK PRIMARY KEY,
SCHTIME VARCHAR2(10) NOT NULL,
MOVIENO VARCHAR2(99) CONSTRAINT SCHEDULE_MOVIENO_FK REFERENCES MOVIE(MOVIENO),
TORDERNO VARCHAR2(10) CONSTRAINT SCHEDULE_ORDERNO_FK REFERENCES TICKETORDER(TORDERNO)
);


DROP TABLE SCHEDULE;
DROP TABLE TICKETORDER;
DROP TABLE PAYMENT;
DROP TABLE THEATER;
DROP TABLE HMEMBER;
DROP TABLE MOVIE;
COMMIT;

SELECT * FROM SCHEDULE;
CREATE SEQUENCE SCHEDULE_SEQ NOCACHE;
CREATE SEQUENCE TICKET_SEQ NOCACHE;



SELECT TICKET_SEQ.CURRVAL FROM DUAL;
SELECT * FROM TICKETORDER;
INSERT INTO TICKETORDER VALUES (
    'TICK'||LPAD(TICKET_SEQ.NEXTVAL,3,0),
    'ID01',
    01,
    'A-4'
);
INSERT INTO TICKETORDER VALUES (
    'TICK'||LPAD(TICKET_SEQ.NEXTVAL,3,0),
    'ID01',
    01,
    'A-5'
);
INSERT INTO TICKETORDER VALUES (
    'TICK'||LPAD(TICKET_SEQ.NEXTVAL,3,0),
    'ID02',
    02,
    'A-6'
);
INSERT INTO TICKETORDER VALUES (
    'TICK'||LPAD(TICKET_SEQ.NEXTVAL,3,0),
    'ID03',
    03,
    'B-4'
);
INSERT INTO TICKETORDER VALUES (
    'TICK'||LPAD(TICKET_SEQ.NEXTVAL,3,0),
    'ID03',
    04,
    'B-5'
);
INSERT INTO TICKETORDER VALUES (
    'TICK'||LPAD(TICKET_SEQ.NEXTVAL,3,0),
    'ID05',
    05,
    'C-4'
);
INSERT INTO TICKETORDER VALUES (
    'TICK'||LPAD(TICKET_SEQ.NEXTVAL,3,0),
    'ID05',
    06,
    'C-5'
);
INSERT INTO TICKETORDER VALUES (
    'TICK'||LPAD(TICKET_SEQ.NEXTVAL,3,0),
    'ID07',
    07,
    'D-4'
);

COMMIT;


DROP TABLE THEATER;
INSERT INTO PAYMENT VALUES (01);
INSERT INTO PAYMENT VALUES (02);
INSERT INTO PAYMENT VALUES (03);
INSERT INTO PAYMENT VALUES (04);
INSERT INTO PAYMENT VALUES (05);
INSERT INTO PAYMENT VALUES (06);
INSERT INTO PAYMENT VALUES (07);
INSERT INTO PAYMENT VALUES (08);
INSERT INTO PAYMENT VALUES (09);
INSERT INTO PAYMENT VALUES (10);

INSERT INTO HMEMBER VALUES('ID01','박수정','010-1111-1111','서울시동대문구뭘알려그래');
INSERT INTO HMEMBER VALUES('ID02','김혜민','010-1111-1112','서울시중랑구뭘알려그래');
INSERT INTO HMEMBER VALUES('ID03','김민철','010-1111-1113','서울시강남구부자동네');
INSERT INTO HMEMBER VALUES('ID04','박동훈','010-1111-1114','서울시무슨구어디사시죠');
INSERT INTO HMEMBER VALUES('ID05','박인욱','010-1111-1115','서울시선생님안녕하세요');
INSERT INTO HMEMBER VALUES('ID06','차은우','010-1111-1116','알고싶네요호호');
INSERT INTO HMEMBER VALUES('ID07','홍길동','010-1111-1117','서울시무슨구어디사시죠');
INSERT INTO HMEMBER VALUES('ID08','홍길자','010-1111-1118','서울시무슨구어디사시죠');
INSERT INTO HMEMBER VALUES('ID09','이순신','01088884455','서울시무슨구어디사시죠');
INSERT INTO HMEMBER VALUES('ID10','신사임당','01051434545','서울시무슨구어디사시죠');


INSERT INTO MOVIE VALUES(10001,'범죄도시1',121,12000);
INSERT INTO MOVIE VALUES(10002,'범죄도시2',132,11500);
INSERT INTO MOVIE VALUES(10003,'철수는못말려',110,15000);
INSERT INTO MOVIE VALUES(10004,'짱구도못말려',130,12500);
INSERT INTO MOVIE VALUES(10005,'유리는사람을말려',147,16000);
INSERT INTO MOVIE VALUES(10006,'사랑방열매따기','2시간 7분',14000);
INSERT INTO MOVIE VALUES(10007,'공부가싫어요','3시간 7분',8500);
INSERT INTO MOVIE VALUES(10008,'공부가왜싫어요?','1시간 49분',9000);
INSERT INTO MOVIE VALUES(10009,'왜일거같은데','40분',6500);
INSERT INTO MOVIE VALUES(10010,'김민철수때문에','1시간 20분',72000);


INSERT INTO THEATER VALUES('THEA001' ,'A-01',10001 );
INSERT INTO THEATER VALUES('THEA002' ,'B-01',10002 );
INSERT INTO THEATER VALUES('THEA003' ,'C-01',10003 );
INSERT INTO THEATER VALUES('THEA004' ,'A-02',10004 );
INSERT INTO THEATER VALUES('THEA005' ,'B-02',10005 );
INSERT INTO THEATER VALUES('THEA006' ,'C-02',10006 );
INSERT INTO THEATER VALUES('THEA007' ,'A-03',10007 );
INSERT INTO THEATER VALUES('THEA008' ,'B-03',10008 );
INSERT INTO THEATER VALUES('THEA009' ,'C-03',10009 );
INSERT INTO THEATER VALUES('THEA010' ,'A-04',10010 );

COMMIT;
SELECT * FROM HMEMBER;
SELECT * FROM SCHEDULE;
SELECT * FROM TICKETORDER;
SELECT * FROM MOVIE;
INSERT INTO SCHEDULE VALUES ('SCH'||LPAD(SCHEDULE_SEQ.NEXTVAL,3,0), '10:40', 10001, 'TICK007');
INSERT INTO SCHEDULE VALUES ('SCH'||LPAD(SCHEDULE_SEQ.NEXTVAL,3,0), '10:40', 10001, 'TICK008');
INSERT INTO SCHEDULE VALUES ('SCH'||LPAD(SCHEDULE_SEQ.NEXTVAL,3,0), '14:20', 10002, 'TICK010');
INSERT INTO SCHEDULE VALUES ('SCH'||LPAD(SCHEDULE_SEQ.NEXTVAL,3,0), '14:20', 10002, 'TICK011');
INSERT INTO SCHEDULE VALUES ('SCH'||LPAD(SCHEDULE_SEQ.NEXTVAL,3,0), '15:40', 10003, 'TICK007');
INSERT INTO SCHEDULE VALUES ('SCH'||LPAD(SCHEDULE_SEQ.NEXTVAL,3,0), '15:40', 10003, 'TICK007');
INSERT INTO SCHEDULE VALUES ('SCH'||LPAD(SCHEDULE_SEQ.NEXTVAL,3,0), '12:40', 10008, 'TICK014');
INSERT INTO SCHEDULE VALUES ('SCH'||LPAD(SCHEDULE_SEQ.NEXTVAL,3,0), '18:20', 10004, 'TICK009');
INSERT INTO SCHEDULE VALUES ('SCH'||LPAD(SCHEDULE_SEQ.NEXTVAL,3,0), '20:10', 10005, 'TICK012');
INSERT INTO SCHEDULE VALUES ('SCH'||LPAD(SCHEDULE_SEQ.NEXTVAL,3,0), '20:10', 10005, 'TICK013');
INSERT INTO SCHEDULE VALUES ('SCH'||LPAD(SCHEDULE_SEQ.NEXTVAL,3,0), '17:30', 10007, 'TICK014');

COMMIT;

desc payment;
desc hmember;
desc movie;
desc theater;
desc ticketorder;
desc schedule;
SELECT * FROM HMEMBER;